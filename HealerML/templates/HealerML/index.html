<!DOCTYPE html>
{% load static %}
<html>

<head>
  <title>系统治愈师 | System Healer</title>
  <!-- 引入Bootstrap 4 CSS文件 -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
  <!-- 引入阿里巴巴图标库字体 -->
  <link rel="stylesheet" href="//at.alicdn.com/t/c/font_3503143_uzhty8chw6m.css">
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <link rel="icon" href="{% static 'img/icon.jpg' %}">
  <!-- echarts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.2/dist/echarts.min.js"></script>
</head>

<body>
  <nav class="navbar navbar-expand-lg navbar-dark my-nav">
    <!-- <a class="navbar-brand" href="#">Logo</a> -->
    <img src="{% static 'img/icon.png' %}" class="my-logo">
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
      aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <p class="my-title">系统治愈师 | System Healer<span class="sr-only">(current)</span></p>
        </li>
        <li>
          <p style="margin: 0; padding-top: 10px; padding-left: 30px; color: #0055af;">———基于机器学习的分布式系统故障诊断系统</p>
        </li>
      </ul>
    </div>
  </nav>
  <div class="container-fluid">
    <div class="row">
      <!-- 左导航栏 -->
      <nav class="col-md-2 d-none d-md-block sidebar my-left">
        <div class="left">
          <div class="sidebar-sticky">
            <ul class="nav flex-column">
              <li class="nav-item">
                <a class="nav-link active" href="#">项目介绍</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">算法描述</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">团队简介</a>
              </li>
            </ul>
          </div>
        </div>
      </nav>

      <!-- 右主要内容栏 -->
      <main role="main" class="col-md-10 ml-sm-auto my-main">
        <div class="container">
          <div class="upload container">
            <h1 class="healer">SYSTEM HEALER</h1>
            <!-- tip begin -->
            <!-- <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#myModal">点我显示提示信息</button> -->
            <img src="{% static 'img/bangzhu.png' %}" class="wenhao" data-toggle="modal" data-target="#myModal">
            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
              <div class="modal-dialog" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="myModalLabel">输入文件提示信息</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p>输入的csv文件格式要求输入的csv文件格式要求输入的csv文件格式要求输入的csv文件格式要求输入的csv文件格式要求输入的csv文件格式要求输入的csv文件格式要求</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">好的</button>
                  </div>
                </div>
              </div>
            </div>
            <!-- tip end -->
            <form method="post" enctype="multipart/form-data">
              <center>
                <input class="btn btn-primary" style="margin-top: 10px; margin-bottom: 30px;" type="file" name="data">
                <br>
                <button type="button submit" class="btn btn-primary" onclick="showLoadingModal()">点击训练</button>
              </center>
            </form>
            {% if data_file_path %}
            <hr>
            <h5>Process Result :
            </h5>
            <a href="{{ download_link }}">Download processed data</a>
            <br>
            <a href="{{ model_download_link }}">Download Model</a>
            {% endif %}
            <!-- waiting begin -->
            <div class="modal" id="loadingModal" tabindex="-1" role="dialog" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-body text-center" style="padding-top: 40px;">
                    <div class="spinner-border" role="status">
                      <span class="sr-only">Loading...</span>
                    </div>
                    <p style="padding-top: 20px;">正在训练模型并预测</p>
                  </div>
                </div>
              </div>
            </div>
            <!-- waiting end -->
          </div>
          <div class="figs-container">
            <!-- <h3 style="margin-top: 30px;">生成图片</h3>
            <p>以下是主要内容的部分。</p> -->
            <!-- fig begin -->
            <div class="row">
              <div class="col-md-6">
                <!-- <img src="img/icon.jpg" alt="图片1" class="img-fluid"> -->
                <div id="pie chart" style="width: 600px; height: 400px;"></div>
              </div>
              <div class="col-md-6">
                <!-- <img src="img/icon.jpg" alt="图片2" class="img-fluid"> -->
                <div id="line chart" style="width: 500px; height: 400px;"></div>
              </div>
            </div>
            <div class="row">
              <div class="col-md-6" style="text-align: center;">
                <p style="padding-top: 10px;">图片说明</p>
                <img src="{{ uploads_path }}_tsne.png" alt="图片3" class="img-fluid" style="width: 400px;">
              </div>
              <div class="col-md-6" style="text-align: center;">
                <p style="padding-top: 10px;">图片说明</p>
                <img src="{% static 'img/icon.jpg' %}" alt="图片4" class="img-fluid">
              </div>
            </div>
          </div>
          <!-- fig end -->
        </div>
      </main>
    </div>
  </div>
  <footer class="my-footer">
    <!-- 底部栏内容 -->
    &copy; 2023 My Website. All rights reserved.
  </footer>
  <!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
  <script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>

  <!-- bootstrap.bundle.min.js 用于弹窗、提示、下拉菜单，包含了 popper.min.js -->
  <script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>

  <!-- 最新的 Bootstrap4 核心 JavaScript 文件 -->
  <script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>



  <script>
    // 显示模态框
    function showLoadingModal() {
      $('#loadingModal').modal('show');
    }

    // 隐藏模态框
    function hideLoadingModal() {
      $('#loadingModal').modal('hide');
    }
  </script>

  <script src="{% static 'charts.js' %}"></script>
</body>

</html>